---
title: 自定义的配置文件的读取
date: 2020-03-16 15:09:19
categories: 
- 工具
- 配置文件
tags: [配置文件,工具]
---

​		自定义的配置文件读取，其实就是如何自己读取配置文件罢了，之间没有自己读过都是靠着框架来读取的，最近看到了就稍微的补充一下。

首先配置文件的形式是properties的格式，考虑到会有多个线程访问这个配置文件，所以使用双重校验锁的单例模式来获取配置文件

``` java
public class PropertyHolderLazy {

	private static Properties prop = null;

	public static Properties getProps() throws Exception {
		if (prop == null) {
			synchronized (PropertyHolderLazy.class) {
				if (prop == null) {
					prop = new Properties();
                    // getResourceAsStream的目录因该为src的目录
prop.load(PropertyHolderLazy.class.getClassLoader().getResourceAsStream("collect.properties"));
				}
			}
		}
		return prop;
	}

}
```

``` java
// 获取配置参数
Properties props = PropertyHolderLazy.getProps();
props.getProperty("LOG_LEGAL_PREFIX"); // 建议使用一个变量的类，来进行获取
```

部分的配置文件：

``` properties
LOG_SOURCE_DIR=d:/logs/accesslog/
LOG_TOUPLOAD_DIR=d:/logs/toupload/
LOG_BACKUP_BASE_DIR=d:/logs/backup/
LOG_BACKUP_TIMEOUT=24
LOG_LEGAL_PREFIX=access.log.
```

