// build time:Sat Aug 29 2020 20:54:02 GMT+0800 (GMT+08:00)
(function(t,e){getcalendar();if(typeof define==="function"&&define.amd){define("calendar",["jquery"],e)}else if(typeof exports==="object"){module.exports=e(require("jquery"))}else{e(t.jQuery)}})(this,function(t){var e={width:280,height:280,zIndex:1,trigger:null,offset:[0,1],customClass:"",view:"date",date:new Date,format:"yyyy/mm/dd",startWeek:0,weekArray:["日","一","二","三","四","五","六"],selectedRang:null,data:null,label:"{d}\n{v}",prev:"&lt;",next:"&gt;",viewChange:t.noop,onSelected:function(t,e,a){},onMouseenter:t.noop,onClose:t.noop},a="data-calendar-",i="["+a+"display-date]",n="["+a+"display-month]",s="["+a+"arrow-date]",r="["+a+"arrow-month]",o=a+"day",h=a+"month",l="disabled",d="markData",c={date:"calendar-d",month:"calendar-m"},u="old",m="new",f="now",p="have",g="selected",v='<i class="dot"></i>',D='{year}/<span class="m">{month}</span>',w='style="width:{w}px;height:{h}px;line-height:{h}px"',y="<li "+w+">{wk}</li>",M="<li "+w+' class="{class}" {action}>{value}</li>',$="<li "+w+" "+h+">{m}月</li>",b=['<div class="calendar-inner">','<div class="calendar-views">','<div class="view view-date">','<div class="calendar-hd">','<a href="javascript:;" data-calendar-display-date class="calendar-display">','{yyyy}/<span class="m">{mm}</span>',"</a>",'<div class="calendar-arrow">','<span class="prev" title="上一月" data-calendar-arrow-date>{prev}</span>','<span class="next" title="下一月" data-calendar-arrow-date>{next}</span>',"</div>","</div>",'<div class="calendar-ct">','<ol class="week">{week}</ol>','<ul class="date-items"></ul>',"</div>","</div>",'<div class="view view-month">','<div class="calendar-hd">','<a href="javascript:;" data-calendar-display-month class="calendar-display">{yyyy}</a>','<div class="calendar-arrow">','<span class="prev" title="上一年" data-calendar-arrow-month>{prev}</span>','<span class="next" title="下一年" data-calendar-arrow-month>{next}</span>',"</div>","</div>",'<ol class="calendar-ct month-items">{month}</ol>',"</div>","</div>","</div>",'<div class="calendar-label"><p>HelloWorld</p><i></i></div>'],x=Object.prototype.toString;function C(t){return x.call(t)==="[object Date]"}function k(t){return x.call(t)==="[object String]"}function I(t){return t.getAttribute("class")||t.getAttribute("className")}String.prototype.repeat=function(t){return this.replace(/\{\w+\}/g,function(e){var a=e.replace(/\{|\}/g,"");return t[a]||""})};String.prototype.toDate=function(){var t=new Date,e=this.replace(/\d/g,"").charAt(0),a=this.split(e);t.setFullYear(a[0]);t.setMonth(a[1]-1);t.setDate(a[2]);return t};Date.prototype.format=function(t){var e=this.getFullYear(),a=this.getMonth()+1,i=this.getDate();return t.replace("yyyy",e).replace("mm",a).replace("dd",i)};Date.prototype.isSame=function(t,e,a){if(C(t)){var i=t;t=i.getFullYear();e=i.getMonth()+1;a=i.getDate()}return this.getFullYear()===t&&this.getMonth()+1===e&&this.getDate()===a};Date.prototype.add=function(t){this.setDate(this.getDate()+t)};Date.prototype.minus=function(t){this.setDate(this.getDate()-t)};Date.prototype.clearTime=function(t){this.setHours(0);this.setSeconds(0);this.setMinutes(0);this.setMilliseconds(0);return this};Date.isLeap=function(t){return t%100!==0&&t%4===0||t%400===0};Date.getDaysNum=function(t,e){var a=31;switch(e){case 2:a=this.isLeap(t)?29:28;break;case 4:case 6:case 9:case 11:a=30;break}return a};Date.getSiblingsMonth=function(t,e,a){var i=new Date(t,e-1);i.setMonth(e-1+a);return{y:i.getFullYear(),m:i.getMonth()+1}};Date.getPrevMonth=function(t,e,a){return this.getSiblingsMonth(t,e,0-(a||1))};Date.getNextMonth=function(t,e,a){return this.getSiblingsMonth(t,e,a||1)};Date.tryParse=function(t){if(!t){return t}return C(t)?t:t.toDate()};function H(e,a){this.$element=t(e);this.options=t.extend({},t.fn.calendar.defaults,a);this.$element.addClass("calendar "+this.options.customClass);this.width=this.options.width;this.height=this.options.height;this.date=this.options.date;this.selectedRang=this.options.selectedRang;this.data=this.options.data;this.init()}H.prototype={constructor:H,getDayAction:function(t){var e=o;if(this.selectedRang){var a=Date.tryParse(this.selectedRang[0]),i=Date.tryParse(this.selectedRang[1]);if(a&&t<a.clearTime()||i&&t>i.clearTime()){e=l}}return e},getDayData:function(t){var e,a=this.data;if(a){for(var i=0,n=a.length;i<n;i++){var s=a[i];if(t.isSame(s.date.toDate())){e=s.value}}}return e},getDayItem:function(e,a,i,n){var s=this.date,r=new Date(e,a-1,i),o={w:this.width/7,h:this.height/7,value:i},h,l;var c=s.isSame(e,a,i)?g:"";if(n===1){o["class"]=u}else if(n===3){o["class"]=m}else{o["class"]=""}if(s.isSame(e,a,i)){o["class"]+=" "+f}o.action=this.getDayAction(r);h=this.getDayData(r);l=t(M.repeat(o));if(h){l.data(d,h);l.html(i+v)}return l},getDaysHtml:function(e,a){var i,n,s,r,o,h,l=this.date,d=t("<ol id="+"cal"+a+" "+'class="days"></ol>');if(C(e)){i=e.getFullYear();n=e.getMonth()+1}else{i=Number(e);n=Number(a)}s=new Date(i,n-1,1).getDay()||7;h=s-this.options.startWeek;r=Date.getDaysNum(i,n);o=Date.getPrevMonth(i,n);prevDaysNum=Date.getDaysNum(i,o.m);nextM=Date.getNextMonth(i,n);var c=1,u=2,m=3,f=0;for(var p=prevDaysNum-h+1;p<=prevDaysNum;p++,f++){d.append(this.getDayItem(o.y,o.m,p,c))}for(var g=1;g<=r;g++,f++){d.append(this.getDayItem(i,n,g,u))}for(var v=1,D=42-f;v<=D;v++){d.append(this.getDayItem(nextM.y,nextM.m,v,m))}return t('<li id="calM"></li>').width(this.options.width).append(d)},getWeekHtml:function(){var t=[],e=this.options.weekArray,a=this.options.startWeek,i=e.length,n=this.width/7,s=this.height/7;for(var r=a;r<i;r++){t.push(y.repeat({w:n,h:s,wk:e[r]}))}for(var o=0;o<a;o++){t.push(y.repeat({w:n,h:s,wk:e[o]}))}return t.join("")},getMonthHtml:function(){var t=[],e=this.width/4,a=this.height/4,i=1;for(;i<13;i++){t.push($.repeat({w:e,h:a,m:i}))}return t.join("")},setMonthAction:function(t){var e=this.date.getMonth()+1;setCurrentyear(t);resolveyear();this.$monthItems.children().removeClass(f);if(t===this.date.getFullYear()){this.$monthItems.children().eq(e-1).addClass(f)}},fillStatic:function(){var t={prev:this.options.prev,next:this.options.next,week:this.getWeekHtml(),month:this.getMonthHtml()};this.$element.html(b.join("").repeat(t))},updateDisDate:function(t,e){this.$disDate.html(D.repeat({year:t,month:e}))},updateDisMonth:function(t){this.$disMonth.html(t)},fillDateItems:function(t,e){var a=[Date.getPrevMonth(t,e),{y:t,m:e},Date.getNextMonth(t,e)];this.$dateItems.html("");for(var i=0;i<3;i++){var n=this.getDaysHtml(a[i].y,a[i].m);this.$dateItems.append(n)}setCurrentmonth(e);retuenday()},hide:function(t,e,a){this.$trigger.val(e.format(this.options.format));this.options.onClose.call(this,t,e,a);this.$element.hide()},trigger:function(){this.$trigger=this.options.trigger instanceof t?this.options.trigger:t(this.options.trigger);var e=this,a=e.$element,i=e.$trigger.offset(),n=e.options.offset;a.addClass("calendar-modal").css({left:i.left+n[0]+"px",top:i.top+e.$trigger.outerHeight()+n[1]+"px",zIndex:e.options.zIndex});e.$trigger.click(function(){a.show()});t(document).click(function(i){if(e.$trigger[0]!=i.target&&!t.contains(a[0],i.target)){a.hide()}})},render:function(){this.$week=this.$element.find(".week");this.$dateItems=this.$element.find(".date-items");this.$monthItems=this.$element.find(".month-items");this.$label=this.$element.find(".calendar-label");this.$disDate=this.$element.find(i);this.$disMonth=this.$element.find(n);var t=this.date.getFullYear(),e=this.date.getMonth()+1;this.updateDisDate(t,e);this.updateMonthView(t);this.fillDateItems(t,e);this.options.trigger&&this.trigger()},setView:function(t){this.$element.removeClass(c.date+" "+c.month).addClass(c[t]);this.view=t},updateDateView:function(e,a,i,n){a=a||this.date.getMonth()+1;var s=this,r=this.$dateItems,o={prev:function(){var i=Date.getPrevMonth(e,a),o=Date.getPrevMonth(e,a,2),h=s.getDaysHtml(o.y,o.m);a=i.m;e=i.y;r.animate({marginLeft:0},300,"swing",function(){r.children(":last").remove();r.prepend(h).css("margin-left","-100%");t.isFunction(n)&&n.call(s)});setCurrentmonth(a);setCurrentyear(e);preMonth()},next:function(){var i=Date.getNextMonth(e,a),o=Date.getNextMonth(e,a,2),h=s.getDaysHtml(o.y,o.m);a=i.m;e=i.y;r.animate({marginLeft:"-200%"},300,"swing",function(){r.children(":first").remove();r.append(h).css("margin-left","-100%");t.isFunction(n)&&n.call(s)});setCurrentmonth(a);setCurrentyear(e);nextMonth()}};if(i){o[i]()}else{this.fillDateItems(e,a)}this.updateDisDate(e,a);this.setView("date");return{y:e,m:a}},updateMonthView:function(t){this.updateDisMonth(t);this.setMonthAction(t);this.setView("month")},getDisDateValue:function(){var t=this.$disDate.html().split("/"),e=Number(t[0]),a=Number(t[1].match(/\d{1,2}/)[0]);return[e,a]},selectedDay:function(t,e){var a=this.getDisDateValue(),i=a[0],n=a[1],s=function(){this.$dateItems.children(":eq(1)").find("["+o+"]:not(."+m+", ."+u+")").removeClass(g).filter(function(e){return parseInt(this.innerHTML)===t}).addClass(g)};if(e){var r=this.updateDateView(i,n,{old:"prev","new":"next"}[e],s);i=r.y;n=r.m;this.options.viewChange("date",i,n)}else{s.call(this)}return new Date(i,n-1,t)},showLabel:function(t,e,a,i){var n=this.$label;n.find("p").html(this.options.label.repeat({m:e,d:a.format(this.options.format),v:i}).replace(/\n/g,"<br>"));var s=n.outerWidth(),r=n.outerHeight();n.css({left:t.pageX-s/2+"px",top:t.pageY-r-20+"px"}).show()},hasLabel:function(){if(this.options.label){t("body").append(this.$label);return true}return false},event:function(){var e=this,a=e.options.viewChange;e.$element.on("click",i,function(){var t=e.getDisDateValue();e.updateMonthView(t[0],t[1]);a("month",t[0],t[1])}).on("click",n,function(){var t=this.innerHTML;e.updateDateView(t);a("date",t)});e.$element.on("click",s,function(){var t=e.getDisDateValue(),i=I(this),n=t[0],s=t[1];var r=e.updateDateView(n,s,i,function(){a("date",r.y,r.m)})}).on("click",r,function(){var t=Number(e.$disMonth.html()),i=I(this);t=i==="prev"?t-1:t+1;e.updateMonthView(t);a("month",t)});e.$element.on("click","["+o+"]",function(){var a=parseInt(this.innerHTML),i=I(this),n=/new|old/.test(i)?i.match(/new|old/)[0]:"";var s=e.selectedDay(a,n);e.options.onSelected.call(this,"date",s,t(this).data(d));e.$trigger&&e.hide("date",s,t(this).data(d))}).on("click","["+h+"]",function(){var t=Number(e.$disMonth.html()),i=parseInt(this.innerHTML);e.updateDateView(t,i);a("date",t,i);e.options.onSelected.call(this,"month",new Date(t,i-1))});e.$element.on("mouseenter","["+o+"]",function(a){var i=e.getDisDateValue(),n=new Date(i[0],i[1]-1,parseInt(this.innerHTML));if(e.hasLabel&&t(this).data(d)){t("body").append(e.$label);e.showLabel(a,"date",n,t(this).data(d))}e.options.onMouseenter.call(this,"date",n,t(this).data(d))}).on("mouseleave","["+o+"]",function(){e.$label.hide()})},resize:function(){var t=this.width,e=this.height,a=this.$element.find(".calendar-hd").outerHeight();this.$element.width(t).height(e+a).find(".calendar-inner, .view").css("width",t+"px");this.$element.find(".calendar-ct").width(t).height(e)},init:function(){this.fillStatic();this.resize();this.render();this.view=this.options.view;this.setView(this.view);this.event()},setData:function(t){this.data=t;if(this.view==="date"){var e=this.getDisDateValue();this.fillDateItems(e[0],e[1])}else if(this.view==="month"){this.updateMonthView(this.$disMonth.html())}},methods:function(t,e){if(x.call(this[t])==="[object Function]"){return this[t].apply(this,e)}}};t.fn.calendar=function(e){var a=this.data("calendar"),i,n=[].slice.call(arguments);if(!a){return this.each(function(){return t(this).data("calendar",new H(this,e))})}if(k(e)){i=e;n.shift();return a.methods(i,n)}return this};t.fn.calendar.defaults=e});function setCurrentyear(t){changeYear=t}function getCurrentyear(){return changeYear}function getCurrentmonth(){return changeMonth}function setCurrentmonth(t){changeMonth=t}function removeHaveClass(){$(".calendar-ct.month-items").children().removeClass("have have2 have3 have4 ")}function addHaveClass(t){$(".calendar-ct.month-items").children().eq(t-1).addClass("have have2 have3 have4")}$(function(){$("#finsh").hide()});function getcalendar(){loadFlag=0;changeMonth=13;mycalendar=null;$.getJSON("/calendar.json",function(t){mycalendar=t})}function transfinsh(){$("#finsh").fadeToggle("slow");$("#coustomerCal").fadeToggle("slow");$(".toast").fadeIn("slow");$("#toast").hide()}
//rebuild by neat 